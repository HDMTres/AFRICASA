{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/app/login/page.js"],"sourcesContent":["\"use client\"\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { FaUser, FaLock, FaEye, FaEyeSlash, FaHome, FaExclamationTriangle, FaGoogle, FaFacebookF, FaCheck } from 'react-icons/fa';\r\nimport { MdSecurity, MdDashboard, MdLocationSearching } from 'react-icons/md';\r\n\r\nconst Login = () => {\r\n    const [email, setEmail] = useState(''); // Chang√© de username √† email\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [successMessage, setSuccessMessage] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n    const searchParams = useSearchParams();\r\n    const router = useRouter();\r\n\r\n    // V√©rifier si l'utilisateur vient de s'inscrire avec succ√®s\r\n    useEffect(() => {\r\n        const message = searchParams.get('message');\r\n        if (message === 'inscription-reussie') {\r\n            setSuccessMessage('Inscription r√©ussie ! Vous pouvez maintenant vous connecter.');\r\n        }\r\n    }, [searchParams]);\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setErrorMessage('');\r\n        setSuccessMessage('');\r\n        \r\n        try {\r\n            console.log('üîÑ Tentative de connexion vers: http://localhost:5000/api/users/login');\r\n            \r\n            // URL CORRIG√âE\r\n            const response = await fetch('http://localhost:5000/api/users/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ \r\n                    email: email,  // Chang√© de username √† email\r\n                    password: password \r\n                })\r\n            });\r\n            \r\n            console.log('üì° R√©ponse re√ßue:', response.status);\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                console.log('‚úÖ Connexion r√©ussie:', data.message);\r\n                \r\n                // Stocker les donn√©es\r\n                localStorage.setItem('token', data.token);\r\n                localStorage.setItem('isAuth', 'true');\r\n                localStorage.setItem('userEmail', email);\r\n                \r\n                if (data.user) {\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n                }\r\n                \r\n                if (rememberMe) {\r\n                    localStorage.setItem('remember_me', 'true');\r\n                }\r\n                \r\n                // ‚úÖ MARQUER QUE L'UTILISATEUR VIENT DE SE CONNECTER\r\n                localStorage.setItem('justLoggedIn', 'true');\r\n                \r\n                // Redirection intelligente selon le r√¥le\r\n                if (data.user && data.user.role === 'agent') {\r\n                    window.location.href = '/dashboard';\r\n                } else {\r\n                    window.location.href = '/';\r\n                }\r\n                \r\n            } else {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.message || 'Erreur de connexion');\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('‚ùå Erreur lors de la connexion :', error);\r\n            setErrorMessage(error.message || 'Erreur de connexion. V√©rifiez vos identifiants.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <section className=\"auth-container-simple\">\r\n                {/* Contenu principal du formulaire - centr√© */}\r\n                <div className=\"auth-main-centered\">\r\n                    <div className=\"auth-card\">\r\n                        <div className=\"auth-header\">\r\n                            <div className=\"brand-logo\">\r\n                                <h2>AFRICASA</h2>\r\n                                <span>Votre maison, notre passion</span>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"auth-form\">\r\n                            <h1>Connexion</h1>\r\n                            <p className=\"auth-subtitle\">Entrez vos identifiants pour acc√©der √† votre espace personnel</p>\r\n                            \r\n                            {successMessage && (\r\n                                <div className=\"success-message\">\r\n                                    <FaCheck /> {successMessage}\r\n                                </div>\r\n                            )}\r\n                            \r\n                            <form onSubmit={handleLogin}>\r\n                                <div className=\"input-group\">\r\n                                    <label htmlFor=\"email\">Email</label> {/* Chang√© le label */}\r\n                                    <div className=\"input-box\">\r\n                                        <FaUser className=\"input-icon\" />\r\n                                        <input \r\n                                            id=\"email\"\r\n                                            type=\"email\" // Chang√© le type\r\n                                            placeholder=\"Votre adresse email\" // Chang√© le placeholder\r\n                                            value={email} \r\n                                            onChange={(e) => setEmail(e.target.value)} \r\n                                            required \r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div className=\"input-group\">\r\n                                    <label htmlFor=\"password\">Mot de passe</label>\r\n                                    <div className=\"input-box\">\r\n                                        <FaLock className=\"input-icon\" />\r\n                                        <input \r\n                                            id=\"password\"\r\n                                            type={showPassword ? \"text\" : \"password\"} \r\n                                            placeholder=\"Votre mot de passe\" \r\n                                            value={password} \r\n                                            onChange={(e) => setPassword(e.target.value)} \r\n                                            required \r\n                                        />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            className=\"password-toggle\"\r\n                                            aria-label={showPassword ? \"Cacher le mot de passe\" : \"Afficher le mot de passe\"}\r\n                                            onClick={() => setShowPassword(!showPassword)}\r\n                                        >\r\n                                            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"form-options\">\r\n                                    <div className=\"checkbox-group\">\r\n                                        <input \r\n                                            type=\"checkbox\" \r\n                                            id=\"remember-me\" \r\n                                            checked={rememberMe}\r\n                                            onChange={() => setRememberMe(!rememberMe)}\r\n                                        />\r\n                                        <label htmlFor=\"remember-me\">Se souvenir de moi</label>\r\n                                    </div>\r\n                                    <Link href=\"/forgot-password\" className=\"forgot-link\">\r\n                                        Mot de passe oubli√©?\r\n                                    </Link>\r\n                                </div>\r\n\r\n                                <button \r\n                                    type=\"submit\" \r\n                                    className={`auth-button ${isLoading ? 'loading' : ''}`}\r\n                                    disabled={isLoading}\r\n                                >\r\n                                    {isLoading ? 'Connexion en cours...' : 'Se connecter'}\r\n                                </button>\r\n                                \r\n                                {errorMessage && (\r\n                                    <div className=\"error-message\">\r\n                                        <FaExclamationTriangle /> {errorMessage}\r\n                                    </div>\r\n                                )}\r\n                            </form>\r\n                            \r\n                            <div className=\"auth-divider\">\r\n                                <span>ou connectez-vous avec</span>\r\n                            </div>\r\n                            \r\n                            <div className=\"social-buttons\">\r\n                                <a href=\"#\" className=\"social-button\">\r\n                                    <FaGoogle /> Google\r\n                                </a>\r\n                                <a href=\"#\" className=\"social-button\">\r\n                                    <FaFacebookF /> Facebook\r\n                                </a>\r\n                            </div>\r\n                            \r\n                            <div className=\"auth-footer\">\r\n                                <p>Vous n'avez pas de compte ? \r\n                                    <Link href=\"/signup\" className=\"auth-link\"> Inscrivez-vous</Link>\r\n                                </p>\r\n                                <Link href=\"/\" className=\"back-link\">\r\n                                    <FaHome /> Retour √† l'accueil\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}